<!--
  ~ This is free and unencumbered software released into the public domain.
  -->
<html>
   <head>
      <title>Apache Fortress End-to-End Web App Security Tutorial</title>
       <link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
       <hr>
       <fieldset>
           <legend><b>Navigation Links</b></legend>
           <ul>
               <li><a href="./opensslheartbleed.html">Heartbleed Bug</a></li>
               <li><a href="./keys.html">Managing PKI Keys</a></li>
               <li><a href="./hosts.html">Set Hostname Entry</a></li>
               <li><a href="./apache-directory-ssl.html">Apache Directory SSL</a></li>
               <li><a href="./apache-fortress-core-ssl.html">Apache Fortress Core SSL</a></li>
               <li><a href="./mysql.html">Install MySQL</a></li>
               <li><a href="./apache-tomcat-ssl.html">Apache Tomcat SSL</a></li>
               <li><a href="./apache-fortress-demo.html">Apache Fortress Demo</a></li>
           </ul>
           <a href="../overview-summary.html">Back to top</a>
       </fieldset>
       <hr>
   </head>
   <body>
      <p>
      <h3>Apache Fortress Core SSL</h3>
      <img src="fortress100.gif">
      <br><br>This section provides instructions to configure Fortress Core to communicate with Apache Directory Server over SSL.
      <h4>Steps to install the Fortress security system</h4>
      <ol>

          <li>
              Change directory:
            <pre>
                <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
cd directory-fortress-core/
                </p>
            </pre>
          </li>

          <li>Set java and maven home env variables.</li>

          <br>

          <li>
              Edit the build.properties in root folder of package.
              These parameters are bound for files like <b>config/fortress.properties</b> and <b>ldap/setup/refreshLDAPData.xml</b> and used on subsequent steps.
              <br>
              Change the settings to:

              <pre>
                <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
# This points fortress to Apache Directory LDAP host name.
# Use value from [<a href="hosts.html">Set Hostname Entry</a>]:
ldap.host=fortressdemo2.com
ldap.port=10636

enable.ldap.ssl=true
# This can be set to 'true' for troubleshooting:
enable.ldap.ssl.debug=false

# Use truststore genned [<a href="keys.html">Managing PKI Keys</a>] or found under /src/test/resources/certs in [directory-fortress-core] source package.
trust.store=[directory-fortress-core]/src/test/resources/certs/mytruststore
trust.store.password=changeit
                </p>
              </pre>
              Where [directory-fortress-core] is base folder of the fortress core source package.
          </li>

          <br>

          <li>
              Build fortress core with maven to regenerate the fortress.properties file with changes from build.properties.
                <pre>
                    <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
mvn install -DskipTests
                    </p>
                </pre>
          </li>

          <li>
              Verify the following file was updated with the new settings:
                <pre>
                    <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
ls -l config/fortress.properties
                    </p>
                </pre>
          </li>

          <li>
              Re-run the Fortress Core Regression Tests to verify fortress core is now SSL enabled:
                <pre>
                    <p style="font: monospace; color: black; background-color: lightgrey; font-size: 10pt">
mvn -Dtest=FortressJUnitTest test
                    </p>
                </pre>
              Tests should run with no errors.
          </li>
      </ol>
   </body>
   <p style="font: monospace; color: black; font-size: 6pt">This is free and unencumbered software released into the public domain.</p>
</html>
